<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
    <title>LoL Pro Draft Simulator v3.0</title>
    <link rel="stylesheet" href="styles/main.css">
</head>
<body>

<div class="header">
    <div style="display:flex; justify-content: space-between; font-weight: bold;">
        <span id="blue-info" style="color:var(--blue)">BLUE CC: 0 | 딜: 0 | 탱: 0</span>
        <span id="step-msg" style="color:var(--gold); font-size: 20px;">밴픽 시작</span>
        <span id="red-info" style="color:var(--red)">RED CC: 0 | 딜: 0 | 탱: 0</span>
    </div>
    <div id="series-info" style="font-size:12px; color:#9fb3c2; margin-top:6px; text-align:center;">BO5 준비중</div>
    <div class="header-tools">
        <span class="bgm-label">BGM</span>
        <input id="bgm-file" class="bgm-file" type="file" accept="audio/*">
        <button id="bgm-toggle" class="bgm-btn" type="button" onclick="toggleBgm()">재생</button>
        <input id="bgm-volume" class="bgm-vol" type="range" min="0" max="1" step="0.05" value="0.35">
    </div>
    <div class="winrate-track">
        <div id="blue-win-bar"></div>
        <div class="wr-label">
            <span id="b-wr-txt">50.0%</span>
            <span id="r-wr-txt">50.0%</span>
        </div>
    </div>
</div>

<div class="main">
    <div class="side" id="blue-side">
        <div class="ban-container" id="b-bans"></div>
        <div id="b-picks"></div>
        <div id="b-team-summary" class="team-summary"></div>
    </div>

    <div class="center">
        <div style="background: #1a2328; padding: 10px; border-radius: 5px; margin-bottom: 10px;">
            <input type="text" id="search" placeholder="챔피언 검색..." oninput="renderPool()" style="width:100%; padding:10px; background:#000; color:white; border:1px solid var(--gold); border-radius: 4px;">
            <div class="locked-wrap">
                <div class="locked-title">하드 피어리스 잠금 챔피언</div>
                <div id="locked-list" class="locked-list"></div>
            </div>
            <div class="filter-group">
                <div class="filter-label">포지션 필터</div>
                <div class="pos-nav" id="pos-nav">
                    <button type="button" class="pos-filter-btn active" data-pos="ALL">ALL</button>
                    <button type="button" class="pos-filter-btn" data-pos="TOP">TOP</button>
                    <button type="button" class="pos-filter-btn" data-pos="JNG">JNG</button>
                    <button type="button" class="pos-filter-btn" data-pos="MID">MID</button>
                    <button type="button" class="pos-filter-btn" data-pos="ADC">ADC</button>
                    <button type="button" class="pos-filter-btn" data-pos="SPT">SPT</button>
                </div>
            </div>
            <div class="filter-group">
                <div class="filter-label">유형 필터</div>
                <div class="pos-nav" id="type-nav">
                    <button type="button" class="pos-filter-btn active" data-type="ALL">ALL</button>
                    <button type="button" class="pos-filter-btn" data-type="Dive">돌진</button>
                    <button type="button" class="pos-filter-btn" data-type="Poke">포킹</button>
                    <button type="button" class="pos-filter-btn" data-type="Anti">받아치기</button>
                </div>
            </div>
            <p id="pos-guide" style="font-size: 12px; color: var(--gold); margin: 8px 0 0 0;">💡 픽 단계에서는 어떤 챔피언이든 자유롭게 선택할 수 있습니다.</p>
            <details class="editor-wrap">
                <summary>챔피언 스케일 편집 도구</summary>
                <div class="editor-body">
                    <textarea id="profile-editor" placeholder='{"Akali":{"type":"Dive","scale":3,"pos":"MID"}}'></textarea>
                    <div class="editor-btns">
                        <button class="editor-btn" type="button" onclick="loadProfileEditor()">현재 설정 불러오기</button>
                        <button class="editor-btn" type="button" onclick="applyProfileEditor()">붙여넣기 적용</button>
                    </div>
                    <div class="editor-msg" id="editor-msg"></div>
                </div>
            </details>
        </div>
        <div class="grid" id="champ-grid"></div>
    </div>

    <div class="side" id="red-side">
        <div class="ban-container" id="r-bans" style="flex-direction: row-reverse;"></div>
        <div id="r-picks"></div>
        <div id="r-team-summary" class="team-summary"></div>
    </div>
</div>

<div id="tooltip" class="tooltip"></div>
<div id="side-select-modal">
    <div class="side-select-card">
        <h2 class="side-title">하드 피어리스 BO5</h2>
        <p class="side-desc">진영을 선택하세요. 선택하지 않은 팀은 컴퓨터가 자동 픽합니다.</p>
        <div class="side-btn-wrap">
            <button class="side-btn blue" type="button" onclick="chooseSide('blue')">블루팀 선택</button>
            <button class="side-btn red" type="button" onclick="chooseSide('red')">레드팀 선택</button>
        </div>
    </div>
</div>
<div id="tutorial-modal">
    <div class="tutorial-card">
        <h2 class="tutorial-title">밴픽 시뮬레이터 튜토리얼</h2>
        <ol class="tutorial-list">
            <li>챔피언은 <b>단일 유형 + 스케일(1~3)</b>만 가집니다. 예: `포킹 3`, `받아치기 2`.</li>
            <li>유형 상성: <b>포킹 > 받아치기 > 돌진 > 포킹</b>. 상성 우위일수록 승률 차이가 크게 벌어집니다.</li>
            <li>딜링/탱킹/CC는 팀 기본 전투력에 합산됩니다. (각 챔피언별 스탯 합)</li>
            <li>각 챔피언은 <b>초반/중반/후반 강점(1~10)</b>을 가지며, 팀의 시간대 우세가 승률에 반영됩니다.</li>
            <li>유형 스케일은 역밸런싱으로 계산됩니다: <b>딜/탱/CC가 높을수록 스케일↓, 낮을수록 스케일↑</b>.</li>
            <li>밴픽 완료 후 10초 동안 경기 시뮬레이션 내레이터가 진행되고, 이후 최종 결과가 확정됩니다.</li>
        </ol>
        <button class="tutorial-btn" type="button" onclick="closeTutorial()">이해했어요, 시작하기</button>
    </div>
</div>

<div id="result-modal">
    <div class="result-card">
        <h1 id="winner-text" style="font-size: 48px; margin-top:0;">BLUE WIN</h1>
        <div id="final-stats" style="margin: 20px 0; line-height: 2;"></div>
        <button id="result-next-btn" onclick="handleNextAction()" style="padding:12px 30px; background:var(--gold); border:none; cursor:pointer; font-weight:bold; font-size: 16px;">다음 세트</button>
    </div>
</div>
<audio id="bgm-player" loop></audio>

<script src="data/champions.js"></script>
<script src="scripts/app.js"></script>
</body>
</html>
